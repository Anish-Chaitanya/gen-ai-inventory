<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸ“Š Customer Inventory View</title>
  <meta http-equiv="refresh" content="300"> <!-- Auto-refresh every 5 mins -->

  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container mt-5 text-center">
    <h1 class="title">ðŸ“¦ Inventory Insights</h1>
    <p class="subtitle">Customer View â€“ AI-Generated Inventory Report</p>

    <!-- ðŸ§¾ Project Description -->
    <div class="card p-4 my-4 shadow-lg" style="background: rgba(255, 255, 255, 0.05);">
      <h4 class="text-warning">ðŸ§  About This Dashboard</h4>
      <p>
        This project is a Gen AI-Based Inventory Management System that analyzes uploaded inventory data using AI logic.
        It calculates sold percentages, reordering needs, and optimal discount strategies based on expiry dates and stock behavior.
        Customers can view real-time insights from processed inventory in a clean and visual format.
      </p>
    </div>

    <!-- Table -->
    <div class="card mt-4 p-3 shadow-lg" style="background: rgba(255, 255, 255, 0.1);">
      {{ table | safe }}
    </div>

    <!-- Chart -->
    <div class="mt-5">
      <h3 class="mb-4 text-white">ðŸ“ˆ Sold Quantity vs Product (â‚¹ Price)</h3>
      <canvas id="salesChart" width="600" height="300"></canvas>
    </div>
  </div>

  <script>
    const ctx = document.getElementById('salesChart').getContext('2d');
    const salesChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: {{ product_labels | safe }},
        datasets: [{
          label: 'Sold Quantity',
          data: {{ sold_quantities | safe }},
          backgroundColor: 'rgba(255, 206, 86, 0.6)',
          borderColor: 'rgba(255, 159, 64, 1)',
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            beginAtZero: true,
            ticks: { color: "#ffffff" }
          },
          x: {
            ticks: { color: "#ffffff" }
          }
        },
        plugins: {
          legend: {
            labels: { color: "#ffffff" }
          }
        }
      }
    });
  </script>
</body>
</html>
